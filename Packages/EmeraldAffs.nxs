{"type":"group","name":"EmeraldAffs","enabled":true,"items":[{"type":"function","name":"onInstall","enabled":true,"code":"let emerald = client.emerald;\nlet affs = client.emerald.affs = {\n  name: 'EmeraldAffs',\n  version: '0.1.0'\n};\nset_variable('emerald_affs_version',affs.version);\n\naffs.set = (aff,val) => {\n  try {\n    client.emerald.debugmsg(`Setting affs.${aff} to ${val}`);\n    affs[aff].value = val;\n    if (affs.has('mutilatedleftleg') && affs.has('mutilatedrightleg') || affs.has('asleep')) affs['sprawled']=true;\n    return val;\n  } catch (error) {\n    client.emerald.emnote(`Invalid aff set: ${error}`,'Affs');\n  }\n}\n\naffs.has = (aff) => {\n  return affs[aff].value;\n}\n\naffs.clear = (aff) => {\n  return affs[aff].value = false;\n}\n\naffs.reset = () => {\n  run_function('resetAffs','','EmeraldAffs');\n  client.emerald.emnote('Affs cleared','Affs');\n}\n\naffs.canAct = () => {\n  return [\n    'aeon',\n    'asleep',\n    'damagedleftarm',\n    'damagedrightarm',\n    'crucified',\n    'entangled',\n    'frozen',\n    'mutilatedleftarm',\n    'mutilatedrightarm',\n    'paralysis',\n    'sprawled',\n    'stun',\n  ].every(aff => !affs[aff].value);\n}\n\naffs.canMove = () => {\n  return [\n    'mutilatedleftleg',\n    'mutilatedrightleg',\n    'entangled',\n    'crucified',\n    'frozen',\n    'paralysis',\n    'sprawled',\n    'stun'\n  ].every(aff => !affs[aff].value);\n}\n\naffs.hasWounds = () => {\n  return [\n    'lightheadwounds','heavyheadwounds','criticalheadwounds','damagedthroat','damagedskull',\n    'lightchestwounds','heavychestwounds','criticalchestwounds','crushedchest','collapsedlung',\n    'lightgutwounds','heavygutwounds','criticalgutwounds','damagedorgans','internalbleeding',\n    'lightleftarmwounds','heavyleftarmwounds','criticalleftarmwounds','damagedleftarm','mutilatedleftarm',\n    'lightrightarmwounds','heavyrightarmwounds','criticalrightarmwounds','damagedrightarm','mutilatedrightarm',\n    'lightleftlegwounds','heavyleftlegwounds','criticalleftlegwounds','damagedleftleg','mutilatedleftleg',\n    'lightrightlegwounds','heavyrightlegwounds','criticalrightlegwounds','damagedrightleg','mutilatedrightleg'\n  ].some(a=>affs.has(a));\n}\n\naffs.hasHeadWounds = () => {\n  return ['lightheadwounds','heavyheadwounds','criticalheadwounds'].some(a=>affs.has(a)) || affs.has('damagedthroat') || affs.has('damagedskull');\n}\naffs.hasChestWounds = () => {\n  return ['lightchestwounds','heavychestwounds','criticalchestwounds'].some(a=>affs.has(a)) || affs.has('crushedchest') || affs.has('collapsedlung');\n}\naffs.hasGutWounds = () => {\n  return ['lightgutwounds','heavygutwounds','criticalgutwounds'].some(a=>affs.has(a)) || affs.has('damagedorgans') || affs.has('internalbleeding');\n}\naffs.hasLeftArmWounds = () => {\n  return ['lightleftarmwounds','heavyleftarmwounds','criticalleftarmwounds'].some(a=>affs.has(a)) || affs.has('damagedleftarm') || affs.has('mutilatedleftarm');\n}\naffs.hasRightArmWounds = () => {\n  return ['lightrightarmwounds','heavyrightarmwounds','criticalrightarmwounds'].some(a=>affs.has(a)) || affs.has('damagedrightarm') || affs.has('mutilatedrightarm');\n}\naffs.hasLeftLegWounds = () => {\n  return ['lightleftlegwounds','heavyleftlegwounds','criticalleftlegwounds'].some(a=>affs.has(a)) || affs.has('damagedleftleg') || affs.has('mutilatedleftleg');\n}\naffs.hasRightLegWounds = () => {\n  return ['lightrightlegwounds','heavyrightlegwounds','criticalrightlegwounds'].some(a=>affs.has(a)) || affs.has('damagedrightleg') || affs.has('mutilatedrightleg');\n}\naffs.checkWoundLevel = (part) => {\n  let clr = 'silver';\n  affs.has(`critical${part}wounds`)\n    ? clr = 'red'\n    : affs.has(`heavy${part}wounds`)\n      ? clr = 'yellow'\n      : affs.has(`light${part}wounds`)\n        ? clr = 'green'\n        : clr = 'silver';\n  return clr;\n}\n\naffs.hasDeathMark = () => {\n  return affs.has('deathmark');\n}\n\naffs.onPrompt = () => {\n  return true;\n}\n\naffs.reset();\nemerald.plugins['affs'] = affs;\nemerald.emnote(`${affs.name} v${affs.version} initialised.`);"},{"type":"function","name":"onUninstall","enabled":true,"code":"// Place any code here you'd like to autorun when the package is uninstalled"},{"type":"function","name":"onGMCP","enabled":true,"code":"let affs = client.emerald.affs;\nif (args.gmcp_method == \"Char.Vitals\") {\n  let v = args.gmcp_args\n  if (v.hp=='0'&&v.mp=='0'&&v.ego=='0'&&v.pow=='0'&&!affs.has('blackout')) affs.set('blackout',true);\n  if (to_number(v.headwounds) > 0) {\n    affs.set('lightheadwounds',true);\n  } else {\n    affs.clear('lightheadwounds');\n    affs.clear('heavyheadwounds');\n    affs.clear('criticalheadwounds');\n  }\n  if (to_number(v.headwounds) >= 35) {\n    affs.set('lightheadwounds',true);\n    affs.set('heavyheadwounds',true);\n  } else {\n    affs.clear('heavyheadwounds');\n    affs.clear('criticalheadwounds');\n  }\n  if (to_number(v.headwounds) >= 75) {\n    affs.set('lightheadwounds',true);\n    affs.set('heavyheadwounds',true);\n    affs.set('criticalheadwounds',true);\n  } else {\n    affs.clear('criticalheadwounds');\n  }\n  if (to_number(v.chestwounds) > 0) {\n    affs.set('lightchestwounds',true);\n  } else {\n    affs.clear('lightchestwounds');\n    affs.clear('heavychestwounds');\n    affs.clear('criticalchestwounds');\n  }\n  if (to_number(v.chestwounds) >= 35) {\n    affs.set('lightchestwounds',true);\n    affs.set('heavychestwounds',true);\n  } else {\n    affs.clear('heavychestwounds');\n    affs.clear('criticalchestwounds');\n  }\n  if (to_number(v.chestwounds) >= 75) {\n    affs.set('lightchestwounds',true);\n    affs.set('heavychestwounds',true);\n    affs.set('criticalchestwounds',true);\n  } else {\n    affs.clear('criticalchestwounds');\n  }\n  if (to_number(v.gutwounds) > 0) {\n    affs.set('lightgutwounds',true);\n  } else {\n    affs.clear('lightgutwounds');\n    affs.clear('heavygutwounds');\n    affs.clear('criticalgutwounds');\n  }\n  if (to_number(v.gutwounds) >= 35) {\n    affs.set('lightgutwounds',true);\n    affs.set('heavygutwounds',true);\n  } else {\n    affs.clear('heavygutwounds');\n    affs.clear('criticalgutwounds');\n  }\n  if (to_number(v.gutwounds) >= 75) {\n    affs.set('lightgutwounds',true);\n    affs.set('heavygutwounds',true);\n    affs.set('criticalgutwounds',true);\n  } else {\n    affs.clear('criticalgutwounds');\n  }\n  if (to_number(v.leftarmwounds) > 0) {\n    affs.set('lightleftarmwounds',true);\n  } else {\n    affs.clear('lightleftarmwounds');\n    affs.clear('heavyleftarmwounds');\n    affs.clear('criticalleftarmwounds');\n  }\n  if (to_number(v.leftarmwounds) >= 35) {\n    affs.set('lightleftarmwounds',true);\n    affs.set('heavyleftarmwounds',true);\n  } else {\n    affs.clear('heavyleftarmwounds');\n    affs.clear('criticalleftarmwounds');\n  }\n  if (to_number(v.leftarmwounds) >= 75) {\n    affs.set('lightleftarmwounds',true);\n    affs.set('heavyleftarmwounds',true);\n    affs.set('criticalleftarmwounds',true);\n  } else {\n    affs.clear('criticalleftarmwounds');\n  }\n  if (to_number(v.rightarmwounds) > 0) {\n    affs.set('lightrightarmwounds',true);\n  } else {\n    affs.clear('lightrightarmwounds');\n    affs.clear('heavyrightarmwounds');\n    affs.clear('criticalrightarmwounds');\n  }\n  if (to_number(v.rightarmwounds) >= 35) {\n    affs.set('lightrightarmwounds',true);\n    affs.set('heavyrightarmwounds',true);\n  } else {\n    affs.clear('heavyrightarmwounds');\n    affs.clear('criticalrightarmwounds');\n  }\n  if (to_number(v.rightarmwounds) >= 75) {\n    affs.set('lightrightarmwounds',true);\n    affs.set('heavyrightarmwounds',true);\n    affs.set('criticalrightarmwounds',true);\n  } else {\n    affs.clear('criticalrightarmwounds');\n  }\n  if (to_number(v.leftlegwounds) > 0) {\n    affs.set('lightleftlegwounds',true);\n  } else {\n    affs.clear('lightleftlegwounds');\n    affs.clear('heavyleftlegwounds');\n    affs.clear('criticalleftlegwounds');\n  }\n  if (to_number(v.leftlegwounds) >= 35) {\n    affs.set('lightleftlegwounds',true);\n    affs.set('heavyleftlegwounds',true);\n  } else {\n    affs.clear('heavyleftlegwounds');\n    affs.clear('criticalleftlegwounds');\n  }\n  if (to_number(v.leftlegwounds) >= 75) {\n    affs.set('lightleftlegwounds',true);\n    affs.set('heavyleftlegwounds',true);\n    affs.set('criticalleftlegwounds',true);\n  } else {\n    affs.clear('criticalleftlegwounds');\n  }\n  if (to_number(v.rightlegwounds) > 0) {\n    affs.set('lightrightlegwounds',true);\n  } else {\n    affs.clear('lightrightlegwounds');\n    affs.clear('heavyrightlegwounds');\n    affs.clear('criticalrightlegwounds');\n  }\n  if (to_number(v.rightlegwounds) >= 35) {\n    affs.set('lightrightlegwounds',true);\n    affs.set('heavyrightlegwounds',true);\n  } else {\n    affs.clear('heavyrightlegwounds');\n    affs.clear('criticalrightlegwounds');\n  }\n  if (to_number(v.rightlegwounds) >= 75) {\n    affs.set('lightrightlegwounds',true);\n    affs.set('heavyrightlegwounds',true);\n    affs.set('criticalrightlegwounds',true);\n  } else {\n    affs.clear('criticalrightlegwounds');\n  }\n}"},{"type":"function","name":"resetAffs","enabled":true,"code":"let affs = client.emerald.affs;\n[\n  'addiction',\n  'allergies',\n  'anorexia',\n  'ataxia',\n  'clumsiness',\n  'confusion',\n  'epilepsy',\n  'hallucinations',\n  'paranoia',\n  'recklessness',\n  'sensitivity',\n  'stupidity',\n  'temporaryinsanity'\n].forEach(a=>affs[a]={type:'mental',value:false});\n\n[\n  'achromaticaura',\n  'aeon',\n  'cloudcoils',\n  'deaf',\n  'disloyalty',\n  'egovice',\n  'healthleech',\n  'holyfire',\n  'jinx',\n  'luminosity',\n  'manabarbs',\n  'pacifism',\n  'powerspikes',\n  'slickness',\n  'timewarp',\n  'warpedaura'\n].forEach(a=>affs[a]={type:'spiritual',value:false});\n\n[\n  'asthenia',\n  'asthma',\n  'blind',\n  'clot',\n  'deathmark',\n  'dysentery',\n  'frostbite',\n  'frozen',\n  'haemophilia',\n  'infestation',\n  'paralysis',\n  'particulates',\n  'powersap',\n  'pox',\n  'relapsing',\n  'rigormortis',\n  'scabies',\n  'shivering',\n  'sickening',\n  'vomiting'\n].forEach(a=>affs[a]={type:'internal',value:false});\n\n[\n  'ablaze',\n  'burns',\n  'collapsedlung',\n  'crushedchest',\n  'damagedleftarm',\n  'damagedleftleg',\n  'damagedorgans',\n  'damagedrightarm',\n  'damagedrightleg',\n  'damagedskull',\n  'damagedthroat',\n  'internalbleeding',\n  'mutilatedleftarm',\n  'mutilatedleftleg',\n  'mutilatedrightarm',\n  'mutilatedrightleg'\n].forEach(a=>affs[a]={type:'physical',value:false});\n\n[\n  'clampedleftarm',\n  'clampedrightarm',\n  'crucified',\n  'entangled',\n  'gored',\n  'grapple',\n  'hoisted',\n  'impaled',\n  'transfixed'\n].forEach(a=>affs[a]={type:'writhe',value:false});\n\n[\n  'amorous',\n  'badluck',\n  'batbane',\n  'bentaura',\n  'blackout',\n  'chasm',\n  'chronicloop',\n  'concussion',\n  'corruptionmark',\n  'crystalspire',\n  'damnationmark',\n  'darknessmark',\n  'darkseed',\n  'despairmark',\n  'echoes',\n  'ectoplasm',\n  'greywhispers',\n  'heatwave',\n  'herbbane',\n  'hypnoticpattern',\n  'incendiary',\n  'malignprophesy',\n  'needlerain',\n  'northwind',\n  'omen',\n  'oracle',\n  'painmark',\n  'paradox',\n  'rainbowpattern',\n  'scarab',\n  'snakebane',\n  'stun',\n  'succumb',\n  'timeechoes'\n].forEach(a=>affs[a]={type:'timed',value:false});\n\n[\n  'amnesia',\n  'asleep',\n  'disrupted',\n  'enfeeble',\n  'fear',\n  'lust',\n  'sprawled'\n].forEach(a=>affs[a]={type:'special',value:false});\n\n[\n  'mucus',\n  'muddy'\n].forEach(a=>affs[a]={type:'cleanse',value:false});\n\n[\n  'lightheadwounds','heavyheadwounds','criticalheadwounds',\n  'lightchestwounds','heavychestwounds','criticalchestwounds',\n  'lightgutwounds','heavygutwounds','criticalgutwounds',\n  'lightleftarmwounds','heavyleftarmwounds','criticalleftarmwounds',\n  'lightrightarmwounds','heavyrightarmwounds','criticalrightarmwounds',\n  'lightleftlegwounds','heavyleftlegwounds','criticalleftlegwounds',\n  'lightrightlegwounds','heavyrightlegwounds','criticalrightlegwounds'\n].forEach(a=>affs[a]={type:'wounds',value:false});"},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let stackedaff = false;\nif ([\n  'cloudcoils',\n  'burns',\n  'particulates',\n  'frostbite',\n  'allergies',\n  'infestation',\n  'temporaryinsanity',\n  'timewarp'\n].includes(args[2])) stackedaff = true\n\nclient.emerald.affs.set(args[2], stackedaff ? args[1] : true);"}],"text":"^You are afflicted with (slight|minor|moderate|considerable|concerning|major|massive)?\\s?(\\w+)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"emerald_affs_cure","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.clear(args[1]);"}],"text":"^You have cured (\\w+)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"group","name":"Emerald_Affs_Diag","enabled":false,"items":[{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'slight',\n  'minor',\n  'moderate',\n  'considerable',\n  'concerning',\n  'major',\n  'massive'\n].indexOf(args[1]);\nclient.emerald.affs.set('temporaryinsanity', lvl);"}],"text":"^suffering from a (slight|minor|moderate|considerable|concerning|major|massive) case of temporary insanity\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'slight',\n  'minor',\n  'moderate',\n  'considerable',\n  'concerning',\n  'major',\n  'massive'\n].indexOf(args[1]);\nclient.emerald.affs.set('timewarp', lvl);"}],"text":"^(slight|minor|moderate|considerable|concerning|major|massive)ly warped in time\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'minor',\n  'moderate',\n  'major',\n  'massive'\n].indexOf(args[1]);\nclient.emerald.affs.set(args[2], lvl);"}],"text":"^suffering from (minor|moderate|major|massive) (allergies|infestation)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'minor',\n  'moderate',\n  'major',\n  'massive'\n].indexOf(args[1]);\nclient.emerald.affs.set('cloudcoils', lvl);"}],"text":"(minor|moderate|major|massive)ly wrapped in cloudcoils threatening to suffocate you\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let xlate = {\n  'ablaze':'ablaze',\n  'anorexic':'anorexia',\n  'asleep':'asleep',\n  'asthmatic':'asthma',\n  'blind':'blind',\n  'confused':'confusion',\n  'crucified':'crucified',\n  'deaf':'deaf',\n  'disrupted':'disrupted',\n  'enfeebled':'enfeebled',\n  'entangled':'entangled',\n  'hallucinating':'hallucinations',\n  'reckless':'recklessness',\n  'pacified':'pacifism',\n  'paralysed':'paralysis',\n  'paranoid':'paranoia',\n  'shivering':'shivering',\n  'stunned':'stun',\n  'transfixed':'transfixed'\n}\nclient.emerald.affs.set(xlate[args[1]], true);"}],"text":"^(ablaze|anorexic|asleep|asthmatic|blind|confused|crucified|deaf|disrupted|enfeebled|entangled|paranoid|reckless|hallucinating|pacified|paralysed|shivering|stunned|transfixed)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let xlate = {\n  'epilepsy':'epilepsy',\n  'a bad bout of dysentery':'dysentery',\n  'a crushed chest': 'crushedchest',\n  'a collapsed lung': 'collapsedlung',\n  'damaged organs': 'damagedorgans',\n  'internal bleeding':'internalbleeding',\n  'a damaged skull': 'damagedskull',\n  'a damaged throat': 'damagedthroat',\n  'a pox':'pox',\n  'a bent aura':'bentaura',\n  'echoes in time': 'timeechoes',\n  'amnesia':'amnesia'\n};\n\nclient.emerald.affs.set(xlate[args[1]], true);"}],"text":"^suffering from (epilepsy|a bad bout of dysentery|a crushed chest|a collapsed lung|damaged organs|internal bleeding|a damaged skull|a damaged throat|a pox|a bent aura|echoes in time|amnesia)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let xlate = {\n  'ego vice':'egovice',\n  'the healthleech':'healthleech',\n  'mana barbs':'manabarbs',\n  'power spikes':'powerspikes',\n  'a powerful jinx':'jinx',\n  'bad luck':'badluck',\n  'Bat Bane':'batbane',\n  'Herb Bane':'herbbane',\n  'malign prophesy': 'malignprophesy',\n  'Snake Bane':'snakebane'\n};\n\nclient.emerald.affs.set(xlate[args[1]], true);"}],"text":"^cursed (?:with|by) (ego vice|the healthleech|mana barbs|power spikes|a powerful jinx|bad luck|Bat Bane|Herb Bane|malign prophesy|Snake Bane)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let xlate = {\n  'clumsiness':'clumsiness',\n  'an achromatic aura':'achromaticaura',\n  'the curse of the Aeon':'aeon',\n  'haemophilia':'haemophilia',\n  'thin blood':'relapsing',\n  'a darkseed implanted beneath the skin':'darkseed',\n  'fear':'fear'\n};\n\nclient.emerald.affs.set(xlate[args[1]], true);"}],"text":"^afflicted (?:with|by) (clumsiness|an achromatic aura|the curse of the Aeon|haemophilia|thin blood|a darkseed implanted beneath the skin|fear)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('addicted', true);"}],"text":"^addicted to potions\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set(`${args[1]}${args[2]}${args[3]}`, true);"}],"text":"^suffering from a (damaged|mutilated) (left|right) (arm|leg)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('ataxia', true);"}],"text":"^disconnected from your body.\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('sensitivity', true);"}],"text":"^sensitive to pain\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('stupidity', true);"}],"text":"^unnaturally stupid\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('disloyalty', true);"}],"text":"^emanating an aura of repugnance\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'weak',\n  'warm',\n  'surging',\n  'burning',\n  'searing',\n  'excruciating'\n].indexOf(args[1]);\nclient.emerald.affs.set('holyfire', lvl);"}],"text":"^surrounded by (weak|warm|surging|burning|searing|excruciating) holyfire\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('luminosity', true);"}],"text":"^surrounded by a colourful light\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('slickness', true);"}],"text":"^extremely oily\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'slightly warped',\n  'moderately warped',\n  'warped',\n  'massively warped',\n  'completely twisted',\n  'dangerously unraveled'\n].indexOf(args[1])\nclient.emerald.affs.set('warpedaura', lvl);"}],"text":"^a (slightly warped|moderately warped|warped|massively warped|completely twisted|dangerously unravelled) aura\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('asthenia', true);"}],"text":"^weakness throughout your arms\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'one',\n  'two',\n  'three',\n  'four'\n].indexOf(args[1]);\nclient.emerald.affs.set('clot', lvl);"}],"text":"^afflicted with (one|two|three|four) blood clots\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'a small stain',\n  'a murky blotch',\n  'a dark mark',\n  'a jagged scar',\n  'a black miasma'\n].indexOf(args[1])\nclient.emerald.affs.set('deathmark', lvl);"}],"text":"^marked by (a small stain|a murky blotch|a dark mark|a jagged scar|a black miasma) on the throat\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'first',\n  'second',\n  'third',\n  'fourth'\n].indexOf(args[1])\nclient.emerald.affs.set(args[2], lvl);"}],"text":"^(first|second|third|fourth) degree (burns|frostbite)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('frozen', true);"}],"text":"^frozen stiff\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let lvl = 1+[\n  'minor',\n  'moderate',\n  'major',\n  'massive'\n].indexOf(args[1]);\nclient.emerald.affs.set('particulates', lvl);"}],"text":"^(minor|moderate|major|massive) particulate build-up\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('powersap', true);"}],"text":"^being sapped of power\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('rigormortis', true);"}],"text":"^turning stiff like a corpse\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('scabies', true);"}],"text":"^infected with scabies mites\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('sickening', true);"}],"text":"^sickened by an unusual illness\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('vomiting', true);"}],"text":"^violently ill\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set(`clamped${args[1]}arm`, true);"}],"text":"^clamped on the (left|right) arm by a hound's jaws\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('gored', true);"}],"text":"^impaled by \\w+\\'s antlers\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('grapple', true);"}],"text":"^grappled by \\w+\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('hoisted', true);"}],"text":"^hoisted by \\w+\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('impaled', true);"}],"text":"^impaled through the gut by \\w+\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('amorous', true);"}],"text":"^in an amorous mood\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('blackout', true);"}],"text":"^devoid of senses\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('chasm', true);"}],"text":"^stumbling around random chasms\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('chronicloop', true);"}],"text":"^looping in time\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('concussion', true);"}],"text":"^has a serious concussion\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set(`${args[1].toLowerCase()}mark`, true);"}],"text":"^Mark of (Corruption|Damnation|Darness|Despair|Pain) by a Nihilist\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('echoes', true);"}],"text":"^hearing echoes of everything\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('ectoplasm', true);"}],"text":"^covered in ectoplasm\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('greywhispers', true);"}],"text":"^haunted by grey whispers\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('heatwave', true);"}],"text":"^blacking out under heatwave\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('hypnoticpattern', true);"}],"text":"^bewitched by hypnotic patterns of lights\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"let xlate = {\n  'a thick gel':'incendiary',\n  'green mucus':'mucus',\n  'sticky mud':'muddy'\n}\n\nclient.emerald.affs.set(xlate[args[1]], true);"}],"text":"^covered in (a thick gel|green mucus|sticky mud)\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('needlerain', true);"}],"text":"^stung by a needle rain\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('northwind', true);"}],"text":"^stumbling in a northern wind\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('omen', true);"}],"text":"^under an ill omen\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('oracle', true);"}],"text":"^under the gaze of an oracle\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('paradox', true);"}],"text":"^surrounded by a paradox\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('rainbowpattern', true);"}],"text":"^beset by dazzling rainbow coloured patterns\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('scarab', true);"}],"text":"^hosting a horde of beetle eggs\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('succumb', true);"}],"text":"^succumbing to Mother Moon\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('sprawled', true);"}],"text":"^sprawled on the ground\\.$","matching":"regexp","whole_words":true,"case_sensitive":true}]},{"type":"group","name":"Emerald_Affs_Afflicted","enabled":true,"items":[{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('addiction',true);"}],"text":"^You feel a terrible thirst for potions grow within you\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('allergies',args[1]);"}],"text":"^You break out in new hives and wheezing as you receive (minor|moderate|major|massive) allergies\\.$","matching":"regexp","whole_words":true,"case_sensitive":true}]},{"type":"group","name":"Emerald_Affs_PartialCures","enabled":true,"items":[{"type":"trigger","name":"","enabled":true,"actions":[{"type":"script","enabled":true,"script":"client.emerald.affs.set('allergies',args[1]);"}],"text":"^You breathe more easily as your lungs expand and your skin clears slightly\\, but you still have (minor|moderate|major|massive) allergies\\.$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"emerald_affs_tempinsanitypartialcure","enabled":true,"actions":[],"text":"^Your sanity partially returns\\, but you still suffer from a (slight|minor|moderate|considerable|concerning|major|massive) case of temporary insanity\\.$","matching":"substring","whole_words":true,"case_sensitive":true}]},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"function","enabled":true,"fn":"resetAffs"},{"type":"enable","enabled":true,"name":"Emerald_Affs_Diag","rtype":"group"}],"text":"^You are\\:$","matching":"regexp","whole_words":true,"case_sensitive":true},{"type":"trigger","name":"","enabled":true,"actions":[{"type":"disable","enabled":true,"name":"Emerald_Affs_Diag","rtype":"group"}],"text":"^You have \\d+ afflictions\\.$","matching":"regexp","whole_words":true,"case_sensitive":true}],"description":"Aff tracking and reporting to other modules."}